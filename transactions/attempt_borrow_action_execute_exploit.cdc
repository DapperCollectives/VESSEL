import DAOTreasuryV4 from "../contracts/DAOTreasury.cdc"

transaction(uuid: UInt64) {
  
  prepare(signer: AuthAccount) {
    let treasury <- signer.load<@DAOTreasuryV4.Treasury>(from: DAOTreasuryV4.TreasuryStoragePath)
    let manager = treasury?.borrowManagerPublic()

    let action = manager?.borrowAction(actionUUID: uuid)

    let treasuryRef: &DAOTreasuryV4.Treasury = (&treasury as &DAOTreasuryV4.Treasury?)!
    action?.action?.execute({"treasury": treasuryRef})

    signer.save(<-treasury, to: DAOTreasuryV4.TreasuryStoragePath)
  }
  execute {
    
  }
}